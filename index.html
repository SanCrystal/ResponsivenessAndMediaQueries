<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsiveness And Media Queries</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main>
        <div class="container">
            <div class="image-bg">
                <!-- <img src="images/bg-intro-desktop.png" alt="bg image"> -->
            </div>
            <div class="content">
                <div class="content-1">
                    <h2>Learn to code by watching others</h2>
                    <p>See how experienced developers solve problems in real time. Watching scripted tutorials is great, but understanding how developers think is invaluable</p>
                </div>
                <div class="content-2">
                    <div class="banner">
                        <strong>Try it for 7 days</strong> $20/mo. thereafter
                    </div>
                    <form >
                        <div class="form-group">
                            
                            <input  type="text" name="firstName" id="firstName" placeholder="First Name">
                            <label for="firstName">first name cannot be empty</label>
                            <i class="error">!</i>
                        </div>
                        <div class="form-group">
                            <input  type="text" name="lastName" id="lastName" placeholder="Last Name">
                            <label  for="lastName">last name cannot be empty</label>
                            <i class="error">!</i>
                        </div>
                        <div class="form-group">
                            <input type="email" name="email" id="email" placeholder="Email Address">
                            <label for="email">Looks like this is not an email</label>
                            <i class="error">!</i>
                        </div>
                        <div class="form-group">
                            <input type="password" name="password" id="password" placeholder="Password">
                            <label for="password">Password cannot be empty</label>
                            <i class="error">!</i>
                        </div>
                        <div class="form-group">
                            <button type="submit">Claim your free trial</button>
                        </div>
                        <p>
                            By clicking the button, you are agreeing to our <a href="#">Terms and Services</a>.
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </main>
    <script type="text/javascript">
        const form = document.querySelector('form');
        const entries = [form.firstName, form.lastName, form.email, form.password];
        form.addEventListener('submit',e=>{
            e.preventDefault();
            entries.forEach(entry=>{
                if(entry.value === ''){
                    entry.parentNode.classList.add('activeErrorMargin');
                    entry.classList.add('danger');
                    entry.nextElementSibling.style.display = 'block';
                    entry.nextElementSibling.nextElementSibling.style.display = 'block';
                }else{
                    entry.parentNode.classList.remove('activeErrorMargin');
                    entry.classList.remove('danger');
                    entry.nextElementSibling.style.display = 'none';
                    entry.nextElementSibling.nextElementSibling.style.display = 'none';
                }
            });
        });

        form.addEventListener('focusout',e=>{
            const entry = e.target;
            if(entry.type === 'submit'){
                return;
            }
            if(entry.value === ''){
                entry.parentNode.classList.add('activeErrorMargin');
                entry.classList.add('danger');
                entry.nextElementSibling.style.display = 'block';
                entry.nextElementSibling.nextElementSibling.style.display = 'block';
            }else if(entry.type == 'email'){
                entry.innerHTML = entry.value;
                console.log(entry.value);
                emailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                if(!emailRegex.test(entry.value)){
                    console.log('email is not valid');
                    entry.parentNode.classList.add('activeErrorMargin');
                    entry.classList.add('danger');
                    entry.nextElementSibling.style.display = 'block';
                    entry.nextElementSibling.nextElementSibling.style.display = 'block';
                    }else{
                        entry.parentNode.classList.remove('activeErrorMargin');
                entry.classList.add('success');
                entry.nextElementSibling.style.display = 'none';
                entry.nextElementSibling.nextElementSibling.style.display = 'none';
                    }
                }else{
                entry.parentNode.classList.remove('activeErrorMargin');
                entry.classList.add('success');
                entry.nextElementSibling.style.display = 'none';
                entry.nextElementSibling.nextElementSibling.style.display = 'none';
            }
        })
        
    </script>
</body>
</html>